CASE STUDY: Dá»± Ä‘oÃ¡n cháº¥t lÆ°á»£ng khÃ´ng khÃ­ theo giá» cho Beijing
ThS. LÃª Thá»‹ ThÃ¹y Trang
2025-12-21
1 Dá»± Ä‘oÃ¡n cháº¥t lÆ°á»£ng khÃ´ng khÃ­ dá»±a trÃªn dá»¯ liá»‡u
1.1 Giá»›i thiá»‡u dá»± Ã¡n
Trong bá»‘i cáº£nh Ä‘Ã´ thá»‹ hoÃ¡ nhanh vÃ  biáº¿n Ä‘á»•i khÃ­ háº­u ngÃ y cÃ ng rÃµ rá»‡t, viá»‡c Ä‘Ã¡nh giÃ¡ vÃ  dá»± Ä‘oÃ¡n cháº¥t lÆ°á»£ng khÃ´ng
khÃ­ (Ä‘áº·c biá»‡t lÃ  ná»“ng Ä‘á»™ PM2.5) Ä‘Ã£ trá»Ÿ thÃ nh nhu cáº§u thiáº¿t yáº¿u, khÃ´ng chá»‰ cho cÆ¡ quan quáº£n lÃ½ mÃ  cÃ²n cho y táº¿ cá»™ng
Ä‘á»“ng vÃ  ngÆ°á»i dÃ¢n. Náº¿u chá»‰ â€œnhÃ¬n sá»‘ liá»‡u hiá»‡n táº¡iâ€ hoáº·c Ã¡p dá»¥ng má»™t ngÆ°á»¡ng cáº£nh bÃ¡o chung cho má»i thá»i Ä‘iá»ƒm, ta ráº¥t
dá»… bá» lá»¡ cÃ¡c Ä‘á»£t Ã´ nhiá»…m tÄƒng vá»t theo mÃ¹a vá»¥, thá»i tiáº¿t, giá» cao Ä‘iá»ƒm, hoáº·c cÃ¡c sá»± kiá»‡n báº¥t thÆ°á»ng. ÄÃ¢y lÃ  lÃºc bÃ i toÃ¡n
dá»± Ä‘oÃ¡n PM2.5 báº±ng há»“i quy vÃ  chuá»—i thá»i gian trá»Ÿ nÃªn cáº¥p thiáº¿t.
Dá»± Ä‘oÃ¡n PM2.5 lÃ  quÃ¡ trÃ¬nh mÃ´ hÃ¬nh hoÃ¡ má»‘i quan há»‡ giá»¯a PM2.5 vÃ  cÃ¡c yáº¿u tá»‘ liÃªn quan (nhiá»‡t Ä‘á»™, Ä‘á»™ áº©m, giÃ³, Ã¡p
suáº¥t, giá» trong ngÃ y, ngÃ y trong tuáº§n, mÃ¹aâ€¦), Ä‘á»“ng thá»i khai thÃ¡c tÃ­nh phá»¥ thuá»™c theo thá»i gian (xu hÆ°á»›ng, chu ká»³,
mÃ¹a vá»¥) cá»§a chÃ­nh chuá»—i PM2.5. Má»¥c tiÃªu cá»‘t lÃµi cá»§a viá»‡c nÃ y bao gá»“m:
â€¢ Há»— trá»£ ra quyáº¿t Ä‘á»‹nh vÃ  cáº£nh bÃ¡o sá»›m: dá»± bÃ¡o trÆ°á»›c PM2.5 trong vÃ i giá»/ngÃ y tá»›i Ä‘á»ƒ phÃ¡t cáº£nh bÃ¡o sá»©c khoáº»,
khuyáº¿n nghá»‹ háº¡n cháº¿ hoáº¡t Ä‘á»™ng ngoÃ i trá»i, hoáº·c Ä‘iá»u chá»‰nh váº­n hÃ nh (trÆ°á»ng há»c, bá»‡nh viá»‡n, giao thÃ´ng).
â€¢ Hiá»ƒu nguyÃªn nhÃ¢n vÃ  tÃ¡c Ä‘á»™ng cá»§a cÃ¡c yáº¿u tá»‘ mÃ´i trÆ°á»ng: vá»›i há»“i quy, ta Ä‘á»‹nh lÆ°á»£ng má»©c áº£nh hÆ°á»Ÿng cá»§a biáº¿n
thá»i tiáº¿t/khung giá»/mÃ¹a vá»¥ lÃªn PM2.5 (vÃ­ dá»¥: Ä‘á»™ áº©m tÄƒng cÃ³ lÃ m PM2.5 tÄƒng/giáº£m, giÃ³ máº¡nh cÃ³ giÃºp khuáº¿ch tÃ¡n
khÃ´ng).
â€¢ Láº­p káº¿ hoáº¡ch vÃ  phÃ¢n bá»• nguá»“n lá»±c: chá»§ Ä‘á»™ng bá»‘ trÃ­ lá»±c lÆ°á»£ng quan tráº¯c, kiá»ƒm soÃ¡t phÃ¡t tháº£i, vÃ  tá»‘i Æ°u lá»‹ch kiá»ƒm
tra/khuyáº¿n nghá»‹ dá»±a trÃªn cÃ¡c giai Ä‘oáº¡n cÃ³ nguy cÆ¡ Ã´ nhiá»…m cao (mÃ¹a Ä‘Ã´ng, giá» cao Ä‘iá»ƒm, ngÃ y Ã­t giÃ³, v.v.).
Trong dá»± Ã¡n nÃ y, chÃºng ta Ä‘Ã³ng vai trÃ² Data Scientist xÃ¢y dá»±ng pipeline dá»± bÃ¡o PM2.5 theo giá» tá»« dá»¯ liá»‡u cháº¥t
lÆ°á»£ng khÃ´ng khÃ­ Beijing (2013â€“2017). Má»¥c tiÃªu khÃ´ng chá»‰ lÃ  â€œcháº¡y Ä‘Ãºng mÃ´ hÃ¬nhâ€, mÃ  cÃ²n pháº£i phÃ¢n tÃ­ch Ä‘áº·c Ä‘iá»ƒm
chuá»—i thá»i gian Ä‘á»ƒ ra quyáº¿t Ä‘á»‹nh chá»n ARIMA (p, d, q).
Dá»± Ã¡n nÃ y Ä‘Æ°á»£c thiáº¿t káº¿ dÃ nh cho cÃ¡c ká»¹ sÆ° dá»¯ liá»‡u vÃ  nhÃ  khoa há»c dá»¯ liá»‡u tÆ°Æ¡ng lai. Dá»± Ã¡n tuÃ¢n thá»§ triáº¿t lÃ½ láº­p
trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng thay vÃ¬ tiáº¿p cáº­n váº¥n Ä‘á» theo notebook rá»i ráº¡c. CÃ¡c bÆ°á»›c thá»±c hiá»‡n bao gá»“m:
1. KhÃ¡m phÃ¡ dá»¯ liá»‡u: Hiá»ƒu cáº¥u trÃºc vÃ  phÃ¢n bá»‘ cá»§a táº­p dá»¯ liá»‡u.
2. LÃ m sáº¡ch vÃ  chuáº©n hoÃ¡ thá»i gian.
3. Chuáº©n bá»‹ dá»¯ liá»‡u cho dá»± bÃ¡o
4. ÄÃ¡nh giÃ¡ mÃ´ hÃ¬nh (Regression baseline)
5. Dá»± bÃ¡o chuá»—i thá»i gian báº±ng ARIMA.
Figure 1: Pipeline project
1.2 Danh sÃ¡ch cÃ¡c module trong project
Äá»ƒ Ä‘áº£m báº£o tÃ­nh chuyÃªn nghiá»‡p, dá»± Ã¡n nÃ y Ã¡p dá»¥ng tÆ° duy láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng (OOP). Thay vÃ¬ viáº¿t hÃ ng
trÄƒm dÃ²ng script xá»­ lÃ½ rá»‘i ráº¯m vÃ o chÃ­nh nhá»¯ng file notebook mÃ  chÃºng ta trÃ¬nh bÃ y, chÃºng ta Ä‘Ã³ng gÃ³i logic vÃ o cÃ¡c
lá»›p (Class) trong má»™t file riÃªng. Sau Ä‘Ã³, khi lÃ m viá»‡c vá»›i notebook ta cÃ³, ta sáº½ sá»­ dá»¥ng hÃ m import Ä‘á»ƒ sá»­ dá»¥ng cÃ¡c lá»›p
nÃ³i trÃªn. Äiá»u nÃ y giÃºp notebook sáº¡ch sáº½, táº­p trung vÃ o káº¿t quáº£ vÃ  dá»… dÃ ng tÃ¡i sá»­ dá»¥ng.
ThÃ nh pháº§n Ã nghÄ©a vÃ  chá»©c nÄƒng
src/classification_library.py Chá»©a cÃ¡c hÃ m dÃ¹ng chung: load dá»¯ liá»‡u tá»« UCI/ZIP, clean dá»¯ liá»‡u, táº¡o
datetime, thÃªm time features, lag featuresâ€¦ (cá»‘t lÃµi cho pipeline dá»¯ liá»‡u).
src/regression_library.py Chuáº©n bá»‹ dataset cho há»“i quy dá»± bÃ¡o, train/test split theo thá»i gian, train
regressor vÃ  tÃ­nh metrics.
src/timeseries_library.py CÃ¡c hÃ m phÃ¢n tÃ­ch chuá»—i thá»i gian (stationarity tests, ACF/PACF, grid
search ARIMA, forecast + Ä‘Ã¡nh giÃ¡)
notebooks/preprocessing_and_eda.ipynb Notebook bÆ°á»›c 1: Thá»±c hiá»‡n táº£i dá»¯ liá»‡u thÃ´, xá»­ lÃ½ cÃ¡c giÃ¡ trá»‹ thiáº¿u, lá»c
dá»¯ liá»‡u vÃ  thá»±c hiá»‡n phÃ¢n tÃ­ch khÃ¡m phÃ¡ dá»¯ liá»‡u (EDA) Ä‘á»ƒ hiá»ƒu tá»•ng
quan vá» táº­p dá»¯ liá»‡u.
notebooks/regression_modelling.ipynb Notebook chuáº©n bá»‹ dataset há»“i quy dá»± bÃ¡o PM2.5(t+h) vÃ  cháº¡y baseline
regression + metrics.
notebooks/arima_forecasting.ipynb Notebook bÆ°á»›c 3: Notebook nÃ y phÃ¢n tÃ­ch chuá»—i thá»i gian + chá»n (p,d,q)
+ huáº¥n luyá»‡n ARIMA + forecast + Ä‘Ã¡nh giÃ¡.
run_papermill.py Script Ä‘iá»u phá»‘i toÃ n bá»™ pipeline: sá»­ dá»¥ng thÆ° viá»‡n papermill Ä‘á»ƒ tá»±
Ä‘á»™ng cháº¡y láº§n lÆ°á»£t cÃ¡c notebook vá»›i cÃ¡c tham sá»‘ cáº¥u hÃ¬nh; lÆ°u láº¡i cÃ¡c
notebook sau khi thá»±c thi, ghi nháº­n thá»i gian cháº¡y (execution time) vÃ 
giÃºp báº¡n cÃ³ thá»ƒ tÃ¡i cháº¡y toÃ n bá»™ quy trÃ¬nh chá»‰ báº±ng má»™t lá»‡nh tá»« dÃ²ng
lá»‡nh.
data/ ThÆ° má»¥c chá»©a dá»¯ liá»‡u Ä‘áº§u vÃ o vÃ  lÆ°u trá»¯ cÃ¡c dá»¯ liá»‡u trung gian Ä‘Ã£ qua
xá»­ lÃ½ (processed data) Ä‘á»ƒ sá»­ dá»¥ng giá»¯a cÃ¡c bÆ°á»›c phÃ¢n tÃ­ch.
Table 1: Báº£ng thÃ nh pháº§n Project
1.3 Giá»›i thiá»‡u Papermill: Tá»± Ä‘á»™ng hoÃ¡ pipeline Notebook
Trong dá»± Ã¡n nÃ y, chÃºng ta sá»­ dá»¥ng thÆ° viá»‡n papermill Ä‘á»ƒ Ä‘iá»u phá»‘i viá»‡c thá»±c thi tuáº§n tá»± cÃ¡c bÆ°á»›c: tiá»n xá»­ lÃ½
(preprocessing), chuáº©n bá»‹ giá» hÃ ng (basket preparation) vÃ  mÃ´ hÃ¬nh hoÃ¡ luáº­t káº¿t há»£p (Apriori modelling).
Thay vÃ¬ má»Ÿ tá»«ng notebook vÃ  cháº¡y thá»§ cÃ´ng nhiá»u láº§n, papermill cho phÃ©p:
â€¢ Tá»± Ä‘á»™ng cháº¡y toÃ n bá»™ pipeline chá»‰ báº±ng má»™t lá»‡nh.
â€¢ Ghi láº¡i káº¿t quáº£ vÃ o cÃ¡c notebook Ä‘Ã£ thá»±c thi.
â€¢ Thay Ä‘á»•i tham sá»‘ Ä‘áº§u vÃ o mÃ  khÃ´ng chá»‰nh láº¡i mÃ£ nguá»“n.
â€¢ Äáº£m báº£o tÃ­nh láº·p láº¡i (reproducibility) trong phÃ¢n tÃ­ch.
CÃ¡ch lÃ m nÃ y pháº£n Ã¡nh tÆ° duy cá»§a cÃ¡c há»‡ thá»‘ng phÃ¢n tÃ­ch dá»¯ liá»‡u chuyÃªn nghiá»‡p:
â€¢ Notebook khÃ´ng chá»‰ Ä‘á»ƒ trÃ¬nh bÃ y mÃ  cÃ²n lÃ  thÃ nh pháº§n cá»§a pipeline.
â€¢ TÃ¡ch biá»‡t logic phÃ¢n tÃ­ch (náº±m trong thÆ° viá»‡n) khá»i quy trÃ¬nh thá»±c thi.
â€¢ Giáº£m thiá»ƒu rá»§i ro thao tÃ¡c thá»§ cÃ´ng vÃ  nháº§m láº«n khi tÃ¡i cháº¡y.
Sinh viÃªn khÃ´ng cáº§n hiá»ƒu sÃ¢u vá» cÆ¡ cháº¿ ná»™i bá»™ cá»§a papermill, nhÆ°ng cáº§n náº¯m Ã½ nghÄ©a cá»§a viá»‡c tá»± Ä‘á»™ng hoÃ¡
pipeline: Ä‘Ã¢y lÃ  má»™t bÆ°á»›c tiáº¿n tá»« tÆ° duy phÃ¢n tÃ­ch mang tÃ­nh trÃ¬nh diá»…n sang tÆ° duy ká»¹ sÆ° dá»¯ liá»‡u, nÆ¡i cÃ¡c quy trÃ¬nh Ä‘Æ°á»£c
chuáº©n hoÃ¡, tÃ¡i láº·p vÃ  dá»… chuyá»ƒn giao.
1.4 Chuáº©n bá»‹ mÃ´i trÆ°á»ng thá»±c hÃ nh
KÃ­ch hoáº¡t mÃ´i trÆ°á»ng áº£o
conda activate beijing_env
ToÃ n bá»™ cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t cho dá»± Ã¡n Ä‘Æ°á»£c liá»‡t kÃª trong file requirements.txt. VÃ¬ váº­y, sau khi kÃ­ch hoáº¡t
mÃ´i trÆ°á»ng, cÃ i Ä‘áº·t cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t báº±ng cÃ¢u lá»‡nh:
pip install -r requirements.txt
2 Nháº¯c láº¡i kiáº¿n thá»©c: Chuá»—i thá»i gian & ARIMA
2.1 Chuá»—i thá»i gian cÃ³ gÃ¬ khÃ¡c so vá»›i dá»¯ liá»‡u thÆ°á»ng?
Dá»¯ liá»‡u chuá»—i thá»i gian khÃ¡c dá»¯ liá»‡u â€œthÆ°á»ngâ€ á»Ÿ chá»— thá»i gian lÃ  má»™t pháº§n cá»§a cáº¥u trÃºc dá»¯ liá»‡u, khÃ´ng chá»‰ lÃ  má»™t
cá»™t thÃ´ng tin, mÃ  cÃ³ cÃ¡c tÃ­nh cháº¥t sau Ä‘Ã¢y:
â€¢ CÃ³ thá»© tá»± vÃ  phá»¥ thuá»™c theo thá»i gian: Ä‘iá»ƒm dá»¯ liá»‡u hÃ´m nay thÆ°á»ng liÃªn quan Ä‘áº¿n hÃ´m qua/hÃ´m trÆ°á»›c, vÃ¬ váº­y
khÃ´ng thá»ƒ shuffle tuá»³ tiá»‡n nhÆ° dá»¯ liá»‡u i.i.d.
â€¢ Mang cÃ¡c â€œmáº«u theo thá»i gianâ€ Ä‘áº·c trÆ°ng: xu hÆ°á»›ng (trend) tÄƒng/giáº£m dÃ i háº¡n, mÃ¹a vá»¥ (seasonality) láº·p láº¡i theo
chu ká»³ (ngÃ y/tuáº§n/thÃ¡ng/nÄƒm), vÃ  tá»± tÆ°Æ¡ng quan (autocorrelation) â€“ giÃ¡ trá»‹ hiá»‡n táº¡i thÆ°á»ng cÃ³ liÃªn há»‡ vá»›i cÃ¡c giÃ¡
trá»‹ quÃ¡ khá»©.
â€¢ CÃ¡ch chia train/test pháº£i tÃ´n trá»ng dÃ²ng thá»i gian: náº¿u chia sai (trá»™n tÆ°Æ¡ng lai vÃ o quÃ¡ khá»©), mÃ´ hÃ¬nh sáº½ â€œnhÃ¬n
trá»™m tÆ°Æ¡ng laiâ€, gÃ¢y leakage theo thá»i gian; káº¿t quáº£ Ä‘Ã¡nh giÃ¡ cÃ³ thá»ƒ Ä‘áº¹p giáº£ nhÆ°ng dá»± bÃ¡o thá»±c táº¿ láº¡i kÃ©m.
2.2 Má»¥c tiÃªu dá»± bÃ¡o cá»§a dá»± Ã¡n
â€¢ Dá»± bÃ¡o pm2.5 táº¡i thá»i Ä‘iá»ƒm ğ‘¡ + horizon (máº·c Ä‘á»‹nh horizon = 1 giá»).
â€¢ ÄÃ¡nh giÃ¡ trÃªn táº­p test sau má»‘c cutoff (vÃ­ dá»¥: 2017-01-01).
2.3 Stationarity vÃ  quyáº¿t Ä‘á»‹nh tham sá»‘ d
â€¢ Trong arima, giáº£ Ä‘á»‹nh ná»n táº£ng lÃ  chuá»—i (tÆ°Æ¡ng Ä‘á»‘i) dá»«ng, tá»©c lÃ  cÃ¡c Ä‘áº·c trÆ°ng thá»‘ng kÃª nhÆ° trung bÃ¬nh vÃ  phÆ°Æ¡ng
sai khÃ´ng thay Ä‘á»•i quÃ¡ máº¡nh theo thá»i gian.
â€¢ Náº¿u chuá»—i khÃ´ng dá»«ng, ta cáº§n thá»±c hiá»‡n sai phÃ¢n (differencing) Ä‘á»ƒ â€œloáº¡i bá»â€ xu hÆ°á»›ng hoáº·c biáº¿n Ä‘á»™ng dÃ i háº¡n;
má»—i láº§n sai phÃ¢n tÆ°Æ¡ng á»©ng vá»›i viá»‡c tÄƒng tham sá»‘ ğ‘‘.
â€¢ Náº¿u chuá»—i Ä‘Ã£ dá»«ng ngay tá»« Ä‘áº§u (hoáº·c trá»Ÿ nÃªn dá»«ng sau khi biáº¿n Ä‘á»•i phÃ¹ há»£p), ta cÃ³ thá»ƒ chá»n ğ‘‘ = 0 Ä‘á»ƒ trÃ¡nh sai
phÃ¢n quÃ¡ má»©c.
Quy trÃ¬nh ra quyáº¿t Ä‘á»‹nh:
â€¢ Quan sÃ¡t trá»±c quan: váº½ chuá»—i gá»‘c vÃ  chá»“ng thÃªm rolling mean, rolling std Ä‘á»ƒ xem trung bÃ¬nh vÃ  Ä‘á»™ biáº¿n Ä‘á»™ng cÃ³
á»•n Ä‘á»‹nh theo thá»i gian hay khÃ´ng.
â€¢ Kiá»ƒm Ä‘á»‹nh thá»‘ng kÃª Ä‘á»ƒ cá»§ng cá»‘ káº¿t luáº­n:
â€“ adf: náº¿u ğ‘ nhá», ta bÃ¡c bá» giáº£ thuyáº¿t â€œcÃ³ unit rootâ€, tá»« Ä‘Ã³ á»§ng há»™ nháº­n Ä‘á»‹nh chuá»—i cÃ³ xu hÆ°á»›ng dá»«ng.
â€“ kpss: náº¿u ğ‘ lá»›n, ta khÃ´ng bÃ¡c bá» giáº£ thuyáº¿t â€œdá»«ngâ€, tá»©c lÃ  dá»¯ liá»‡u phÃ¹ há»£p vá»›i giáº£ Ä‘á»‹nh dá»«ng.
2.4 acf/pacf vÃ  quyáº¿t Ä‘á»‹nh ğ‘, ğ‘
â€¢ Sau khi Ä‘Ã£ chá»n Ä‘Æ°á»£c ğ‘‘ (Ä‘áº£m báº£o chuá»—i Ä‘á»§ gáº§n dá»«ng), bÆ°á»›c tiáº¿p theo lÃ  quyáº¿t Ä‘á»‹nh hai thÃ nh pháº§n cÃ²n láº¡i cá»§a
arima: ğ‘ cho pháº§n tá»± há»“i quy (ar) vÃ  ğ‘ cho pháº§n trung bÃ¬nh trÆ°á»£t (ma).
â€¢ pacf thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ gá»£i Ã½ ğ‘: náº¿u pacf â€œcáº¯tâ€ rÃµ sau má»™t vÃ i Ä‘á»™ trá»… (lag), Ä‘Ã³ lÃ  tÃ­n hiá»‡u sá»‘ báº­c ar cÃ³ thá»ƒ náº±m
quanh vá»‹ trÃ­ cáº¯t nÃ y.
â€¢ acf thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ gá»£i Ã½ ğ‘: tÆ°Æ¡ng tá»±, náº¿u acf giáº£m máº¡nh vÃ  gáº§n nhÆ° triá»‡t tiÃªu sau má»™t sá»‘ lag nháº¥t Ä‘á»‹nh, ta
cÃ³ thá»ƒ cÃ¢n nháº¯c ğ‘ quanh vÃ¹ng Ä‘Ã³.
â€¢ Tuy nhiÃªn, trong dá»¯ liá»‡u thá»±c táº¿, tÃ­n hiá»‡u tá»« acf/pacf cÃ³ thá»ƒ khÃ´ng hoÃ n toÃ n sáº¯c nÃ©t (do nhiá»…u, mÃ¹a vá»¥, hoáº·c cáº¥u
trÃºc phá»©c táº¡p). VÃ¬ váº­y, cÃ¡ch cháº¯c Äƒn lÃ  thá»­ má»™t lÆ°á»›i nhá» cÃ¡c giÃ¡ trá»‹ á»©ng viÃªn vÃ  chá»n mÃ´ hÃ¬nh tá»‘t nháº¥t theo tiÃªu
chÃ­ aic/bic Ä‘á»ƒ chá»‘t bá»™ tham sá»‘ (ğ‘, ğ‘‘, ğ‘).
2.5 ÄÃ¡nh giÃ¡ dá»± bÃ¡o
VÃ¬ sao pháº£i Ä‘Ã¡nh giÃ¡ dá»± bÃ¡o?
â€¢ Trong bÃ i toÃ¡n dá»± bÃ¡o, â€œmá»¥c tiÃªu cuá»‘i cÃ¹ngâ€ khÃ´ng pháº£i lÃ  váº½ Ä‘Æ°á»£c Ä‘Æ°á»ng dá»± bÃ¡o Ä‘áº¹p, mÃ  lÃ  dá»± bÃ¡o cÃ³ há»¯u Ã­ch
khi Ä‘Æ°a vÃ o sá»­ dá»¥ng thá»±c táº¿. VÃ¬ váº­y, Ä‘Ã¡nh giÃ¡ dá»± bÃ¡o lÃ  bÆ°á»›c neo (anchor) Ä‘á»ƒ má»i quyáº¿t Ä‘á»‹nh vá» xá»­ lÃ½ dá»¯ liá»‡u,
chá»n mÃ´ hÃ¬nh, vÃ  chá»‰nh tham sá»‘ Ä‘á»u cÃ³ cÄƒn cá»©.
â€¢ Náº¿u chÆ°a cÃ³ má»™t quy trÃ¬nh Ä‘Ã¡nh giÃ¡ Ä‘Ãºng (tÃ¡ch train/test theo thá»i gian, chá»n thÆ°á»›c Ä‘o phÃ¹ há»£p), ta ráº¥t dá»… rÆ¡i vÃ o
hai sai láº§m phá»• biáº¿n: (i) káº¿t quáº£ Ä‘áº¹p giáº£ do leakage theo thá»i gian, hoáº·c (ii) tá»‘i Æ°u sai má»¥c tiÃªu, vÃ­ dá»¥ mÃ´ hÃ¬nh
â€œbÃ¡m Ä‘Æ°á»ngâ€ tá»‘t khi nhÃ¬n hÃ¬nh nhÆ°ng sai sá»‘ thá»±c táº¿ láº¡i lá»›n.
â€¢ ÄÃ¡nh giÃ¡ trÆ°á»›c giÃºp tráº£ lá»i cÃ¡c cÃ¢u há»i quan trá»ng: mÃ´ hÃ¬nh cÃ³ dá»± bÃ¡o tá»‘t hÆ¡n baseline khÃ´ng, sai sá»‘ cÃ³ cháº¥p nháº­n
Ä‘Æ°á»£c khÃ´ng, mÃ´ hÃ¬nh cÃ³ á»•n Ä‘á»‹nh qua cÃ¡c giai Ä‘oáº¡n khÃ¡c nhau khÃ´ng, vÃ  má»©c rá»§i ro khi gáº·p cÃ¡c Ä‘á»‰nh Ã´ nhiá»…m cao
lÃ  bao nhiÃªu. Chá»‰ khi nhá»¯ng cÃ¢u há»i nÃ y Ä‘Æ°á»£c tráº£ lá»i rÃµ rÃ ng, ta má»›i cÃ³ lÃ½ do há»£p lÃ½ Ä‘á»ƒ Ä‘i tiáº¿p vÃ o pháº§n tá»‘i Æ°u hoÃ¡
vÃ  ra quyáº¿t Ä‘á»‹nh mÃ´ hÃ¬nh.
CÃ¡c thÆ°á»›c Ä‘o Ä‘Ã¡nh giÃ¡ dá»± bÃ¡o hay dÃ¹ng:
â€¢ mae (sai sá»‘ tuyá»‡t Ä‘á»‘i trung bÃ¬nh): dá»… hiá»ƒu, Ã­t nháº¡y vá»›i ngoáº¡i lai hÆ¡n rmse; pháº£n Ã¡nh â€œtrung bÃ¬nh má»—i láº§n dá»± bÃ¡o
lá»‡ch bao nhiÃªu Ä‘Æ¡n vá»‹â€.
â€¢ rmse (cÄƒn báº­c hai sai sá»‘ bÃ¬nh phÆ°Æ¡ng trung bÃ¬nh): pháº¡t máº¡nh cÃ¡c sai sá»‘ lá»›n, phÃ¹ há»£p khi ta muá»‘n mÃ´ hÃ¬nh trÃ¡nh
nhá»¯ng láº§n dá»± bÃ¡o lá»‡ch quÃ¡ nhiá»u (Ä‘áº·c biá»‡t quan trá»ng vá»›i cÃ¡c Ä‘á»‰nh pm2.5).
â€¢ (tuá»³ chá»n) smape/mape: há»¯u Ã­ch khi cáº§n nhÃ¬n sai sá»‘ theo tá»· lá»‡ pháº§n trÄƒm, nhÆ°ng pháº£i cáº©n tháº­n khi giÃ¡ trá»‹ thá»±c gáº§n
0 vÃ¬ tá»· lá»‡ cÃ³ thá»ƒ bÃ¹ng ná»• vÃ  gÃ¢y hiá»ƒu sai cháº¥t lÆ°á»£ng mÃ´ hÃ¬nh.
3 PhÃ¢n tÃ­ch vÃ  lÃ m sáº¡ch dá»¯ liá»‡u
3.1 Tá»•ng quan vá» táº­p dá»¯ liá»‡u
1) Táº­p dá»¯ liá»‡u sá»­ dá»¥ng
Táº­p dá»¯ liá»‡u dÃ¹ng trong case study nÃ y lÃ  beijing multi-site air quality data (prsa). Dá»¯ liá»‡u gá»“m cÃ¡c phÃ©p Ä‘o theo
giá» vá» cháº¥t lÆ°á»£ng khÃ´ng khÃ­ vÃ  khÃ­ tÆ°á»£ng táº¡i 12 tráº¡m quan tráº¯c á»Ÿ báº¯c kinh trong giai Ä‘oáº¡n 2013â€“2017. Má»—i tráº¡m Ä‘Æ°á»£c
lÆ°u thÃ nh má»™t file .csv riÃªng, vÃ  toÃ n bá»™ Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i trong má»™t file zip:
data/raw/PRSA2017_Data_20130301-20170228.zip
Trong dá»± Ã¡n, ta sáº½ Ä‘á»c trá»±c tiáº¿p tá»« file zip, sau Ä‘Ã³ há»£p nháº¥t (merge/concat) cÃ¡c file theo tráº¡m thÃ nh má»™t báº£ng lá»›n
Ä‘á»ƒ lÃ m viá»‡c theo Ä‘Ãºng cáº¥u trÃºc dá»¯ liá»‡u chuá»—i thá»i gian.
2) ÄÆ¡n vá»‹ quan sÃ¡t, táº§n suáº¥t vÃ  pháº¡m vi thá»i gian
â€¢ ÄÆ¡n vá»‹ quan sÃ¡t (1 dÃ²ng): má»™t phÃ©p Ä‘o theo giá» táº¡i má»™t tráº¡m.
â€¢ Táº§n suáº¥t: hourly (má»—i giá» cÃ³ má»™t báº£n ghi cho má»—i tráº¡m).
â€¢ Pháº¡m vi thá»i gian: tá»« 2013-03-01 00:00:00 Ä‘áº¿n 2017-02-28 23:00:00.
â€¢ Sá»‘ giá» má»—i tráº¡m: 35,064 dÃ²ng (tÆ°Æ¡ng á»©ng Ä‘Ãºng sá»‘ giá» trong khoáº£ng thá»i gian trÃªn).
â€¢ Tá»•ng sá»‘ dÃ²ng toÃ n bá»™ dá»¯ liá»‡u: 420,768 dÃ²ng (= 12 Ã— 35,064).
ÄÃ¢y lÃ  má»™t bá»™ dá»¯ liá»‡u chuá»—i thá»i gian theo giá» khÃ¡ â€œchuáº©nâ€ vÃ¬ khung thá»i gian Ä‘áº§y Ä‘á»§ vÃ  Ä‘á»u Ä‘áº·n. Tuy váº­y, má»™t sá»‘
biáº¿n Ä‘o váº«n bá»‹ thiáº¿u (missing) á»Ÿ cÃ¡c thá»i Ä‘iá»ƒm nháº¥t Ä‘á»‹nh, ráº¥t phÃ¹ há»£p Ä‘á»ƒ sinh viÃªn thá»±c hÃ nh eda chuá»—i thá»i gian vÃ  xá»­
lÃ½ dá»¯ liá»‡u thiáº¿u trÆ°á»›c khi dá»± bÃ¡o.
3) Danh sÃ¡ch cá»™t vÃ  Ã½ nghÄ©a
Má»—i file csv cá»§a tá»«ng tráº¡m cÃ³ cÃ¹ng cáº¥u trÃºc vá»›i 18 cá»™t. cÃ³ thá»ƒ hiá»ƒu nhanh theo cÃ¡c nhÃ³m sau:
â€¢ chá»‰ má»¥c:
â€“ no: sá»‘ thá»© tá»± dÃ²ng trong file.
â€¢ thá»i gian:
â€“ year, month, day, hour: thÃ´ng tin thá»i gian theo giá» (sáº½ Ä‘Æ°á»£c ghÃ©p thÃ nh má»™t cá»™t datetime).
â€¢ Ã´ nhiá»…m:
â€“ pm2.5, pm10, so2, no2, co, o3: ná»“ng Ä‘á»™ cÃ¡c cháº¥t Ã´ nhiá»…m (má»¥c tiÃªu chÃ­nh cá»§a lab lÃ  pm2.5).
â€¢ khÃ­ tÆ°á»£ng:
â€“ temp, pres, dewp, rain, wspm: nhiá»‡t Ä‘á»™, Ã¡p suáº¥t, Ä‘iá»ƒm sÆ°Æ¡ng, lÆ°á»£ng mÆ°a, tá»‘c Ä‘á»™ giÃ³.
â€¢ giÃ³ vÃ  tráº¡m:
â€“ wd: hÆ°á»›ng giÃ³ (biáº¿n phÃ¢n loáº¡i).
â€“ station: tÃªn tráº¡m (12 giÃ¡ trá»‹ khÃ¡c nhau).
4) Äá»™ thiáº¿u dá»¯ liá»‡u (missingness) â€“ vÃ¬ sao cáº§n lÃ m sáº¡ch
Khi gá»™p dá»¯ liá»‡u cá»§a 12 tráº¡m, má»™t sá»‘ biáº¿n Ã´ nhiá»…m cÃ³ tá»· lá»‡ thiáº¿u Ä‘Ã¡ng ká»ƒ hÆ¡n nhÃ³m khÃ­ tÆ°á»£ng. Tá»· lá»‡ missing (xáº¥p
xá»‰) thÆ°á»ng gáº·p:
â€¢ co: âˆ¼ 4.92%
â€¢ o3: âˆ¼ 3.16%
â€¢ no2: âˆ¼ 2.88%
â€¢ so2: âˆ¼ 2.14%
â€¢ pm2.5: âˆ¼ 2.08%
â€¢ pm10: âˆ¼ 1.53%
â€¢ wd: âˆ¼ 0.43%
â€¢ NhÃ³m khÃ­ tÆ°á»£ng (temp, pres, dewp, rain, wspm): dÆ°á»›i âˆ¼ 0.10%
RiÃªng pm2.5, tá»· lá»‡ thiáº¿u cÃ³ thá»ƒ khÃ¡c nhau theo tráº¡m (dao Ä‘á»™ng khoáº£ng âˆ¼ 1.09% Ä‘áº¿n âˆ¼ 2.72%). VÃ­ dá»¥:
â€¢ cao hÆ¡n: huairou (âˆ¼ 2.72%), aotizhongxin (âˆ¼ 2.64%)
â€¢ tháº¥p hÆ¡n: wanliu (âˆ¼ 1.09%)
5) PhÃ¢n phá»‘i pm2.5
Khi nhÃ¬n vÃ o phÃ¢n phá»‘i pm2.5 (gá»™p 12 tráº¡m vÃ  bá» cÃ¡c giÃ¡ trá»‹ na), ta thÆ°á»ng tháº¥y chuá»—i cÃ³ Ä‘uÃ´i pháº£i dÃ i vÃ  Ä‘Ã´i lÃºc
xuáº¥t hiá»‡n cÃ¡c Ä‘á»‰nh ráº¥t cao (spike). thá»‘ng kÃª mÃ´ táº£ thÆ°á»ng gáº·p:
â€¢ sá»‘ máº«u há»£p lá»‡: 412,029
â€¢ mean: âˆ¼ 79.79
â€¢ median (50%): 55
â€¢ q1â€“q3: 20 â†’ 111
â€¢ 95th percentile: 242
â€¢ max: 999 (ráº¥t hiáº¿m; cÃ³ thá»ƒ lÃ  spike/outlier hoáº·c giá»›i háº¡n cáº£m biáº¿n)
Ã nghÄ©a: vÃ¬ cÃ³ spike vÃ  Ä‘uÃ´i pháº£i dÃ i, lá»±a chá»n thÆ°á»›c Ä‘o Ä‘Ã¡nh giÃ¡ cÅ©ng cáº§n cÃ¢n nháº¯c, rmse sáº½ nháº¡y vá»›i cÃ¡c sai sá»‘
lá»›n (Ä‘áº·c biá»‡t khi dá»± bÃ¡o lá»‡ch á»Ÿ nhá»¯ng Ä‘á»‰nh Ã´ nhiá»…m cao), trong khi mae pháº£n Ã¡nh má»©c sai lá»‡ch â€œtrung bÃ¬nhâ€ á»•n Ä‘á»‹nh hÆ¡n.
ÄÃ¢y lÃ  Ä‘iá»ƒm ráº¥t phÃ¹ há»£p Ä‘á»ƒ sinh viÃªn tháº£o luáº­n vÃ  ra quyáº¿t Ä‘á»‹nh theo Ä‘Ãºng
3.2 Hiá»ƒu dá»¯ liá»‡u chuá»—i thá»i gian - preprocessing_and_eda.ipynb
Má»¥c tiÃªu cá»§a notebook:
â€¢ Äá»c dá»¯ liá»‡u tá»« file zip (hoáº·c tá»« uci náº¿u Ä‘Æ°á»£c cáº¥u hÃ¬nh).
â€¢ LÃ m sáº¡ch dá»¯ liá»‡u vÃ  táº¡o cá»™t thá»i gian dáº¡ng datetime Ä‘á»ƒ sáº¯p xáº¿p, lá»c, vÃ  váº½ theo trá»¥c thá»i gian.
â€¢ PhÃ¢n tÃ­ch dá»¯ liá»‡u Ä‘á»ƒ tráº£ lá»i cÃ¡c cÃ¢u há»i cá»‘t lÃµi:
(1) chuá»—i cÃ³ thiáº¿u dá»¯ liá»‡u khÃ´ng?
(2) cÃ³ xu hÆ°á»›ng hoáº·c mÃ¹a vá»¥ khÃ´ng?
(3) cÃ³ tá»± tÆ°Æ¡ng quan khÃ´ng?
(4) má»©c Ä‘á»™ dá»«ng (stationarity) nhÆ° tháº¿ nÃ o?
Tham sá»‘ quan trá»ng: sinh viÃªn cáº§n xem cell parameters vÃ  hiá»ƒu Ã½ nghÄ©a cÃ¡c biáº¿n cáº¥u hÃ¬nh:
â€¢ use_ucimlrepo = false
â€¢ raw_zip_path = `data/raw/PRSA2017_Data_20130301-20170228.zip'
â€¢ lag_hours = [1, 3, 24] (dÃ¹ng Ä‘á»ƒ táº¡o Ä‘áº·c trÆ°ng lag á»Ÿ cÃ¡c notebook sau)
â€¢ output cleaned: data/processed/cleaned.parquet
LÆ°u Ã½ lá»—i hay gáº·p: náº¿u khÃ´ng Ä‘áº·t Ä‘Ãºng file zip trong data/raw/ thÃ¬ notebook sáº½ bÃ¡o zip not found. vÃ¬ váº­y,
trÆ°á»›c khi cháº¡y cáº§n kiá»ƒm tra Ä‘Ãºng tÃªn file vÃ  Ä‘Ãºng Ä‘Æ°á»ng dáº«n.
3.3 Baseline há»“i quy cho dá»± bÃ¡o - regression_modelling.ipynb
Má»¥c tiÃªu cá»§a notebook:
â€¢ táº¡o bá»™ dá»¯ liá»‡u dá»± bÃ¡o báº±ng cÃ¡ch dá»‹ch má»¥c tiÃªu theo horizon: pm2.5_target = pm2.5(t + horizon).
â€¢ sinh Ä‘áº·c trÆ°ng lag (1, 3, 24 giá») vÃ  cÃ¡c Ä‘áº·c trÆ°ng thá»i gian (giá», ngÃ y, thÃ¡ng, â€¦).
â€¢ chia train/test theo má»‘c cutoff Ä‘á»ƒ báº£o toÃ n thá»© tá»± thá»i gian vÃ  trÃ¡nh leakage.
â€¢ huáº¥n luyá»‡n má»™t mÃ´ hÃ¬nh há»“i quy baseline, sau Ä‘Ã³ lÆ°u láº¡i káº¿t quáº£ Ä‘Ã¡nh giÃ¡ (metrics) Ä‘á»ƒ lÃ m má»‘c so sÃ¡nh.
3.4 Dá»± bÃ¡o ARIMA - arima_forecasting.ipynb
Má»¥c tiÃªu cá»§a notebook:
â€¢ Chuáº©n bá»‹ chuá»—i pm2.5 theo thá»i gian vÃ  Ä‘áº£m báº£o táº§n suáº¥t theo giá» (resample náº¿u cáº§n).
â€¢ PhÃ¢n tÃ­ch tÃ­nh dá»«ng Ä‘á»ƒ quyáº¿t Ä‘á»‹nh tham sá»‘ sai phÃ¢n ğ‘‘.
â€¢ DÃ¹ng acf/pacf Ä‘á»ƒ gá»£i Ã½ vÃ¹ng giÃ¡ trá»‹ ğ‘, ğ‘, sau Ä‘Ã³ thá»­ má»™t lÆ°á»›i nhá» Ä‘á»ƒ chá»‘t mÃ´ hÃ¬nh.
â€¢ fit arima vÃ  dá»± bÃ¡o 1-step ahead (horizon = 1) trÃªn táº­p test.
â€¢ ÄÃ¡nh giÃ¡ mae/rmse vÃ  váº½ so sÃ¡nh forecast vá»›i actual Ä‘á»ƒ nhÃ¬n trá»±c quan cháº¥t lÆ°á»£ng dá»± bÃ¡o.
4 Thá»±c hÃ nh
Sinh viÃªn thá»±c hiá»‡n cÃ¡c question sau vÃ  viáº¿t trong blog, sau Ä‘Ã³ chuáº©n bá»‹ slide trÃ¬nh bÃ y cho hoáº¡t Ä‘á»™ng FIT-DNU
CONQUER:
Q1: Sinh viÃªn kiá»ƒm tra láº¡i xem code Ä‘Ã£ Ä‘áº§y Ä‘á»§ cÃ¡c thÃ nh pháº§n Ä‘á»ƒ hiá»ƒu dá»¯ liá»‡u nÃ y chÆ°a? Náº¿u chÆ°a thÃ¬ bá»• sung:
â€¢ Kiá»ƒm tra khoáº£ng thá»i gian dá»¯ liá»‡u phá»§ (start/end) vÃ  xÃ¡c nháº­n táº§n suáº¥t theo giá» lÃ  liÃªn tá»¥c.
â€¢ TÃ­nh tá»· lá»‡ thiáº¿u theo tá»«ng biáº¿n, Ä‘á»“ng thá»i quan sÃ¡t thiáº¿u theo thá»i gian (thiáº¿u táº­p trung vÃ o giai Ä‘oáº¡n nÃ o hay ráº£i
Ä‘á»u).
â€¢ DÃ¹ng boxplot hoáº·c quantile Ä‘á»ƒ nhÃ¬n nhanh ngoáº¡i lai (outliers) vÃ  phÃ¢n phá»‘i lá»‡ch.
â€¢ Váº½ chuá»—i pm2.5 theo thá»i gian: má»™t Ä‘á»“ thá»‹ toÃ n giai Ä‘oáº¡n vÃ  má»™t Ä‘á»“ thá»‹ phÃ³ng to 1â€“2 thÃ¡ng Ä‘á»ƒ nhÃ¬n rÃµ dao Ä‘á»™ng.
â€¢ Kiá»ƒm tra tá»± tÆ°Æ¡ng quan Ä‘Æ¡n giáº£n: so sÃ¡nh tÆ°Æ¡ng quan cá»§a pm2.5 vá»›i cÃ¡c Ä‘á»™ trá»… nhÆ° 24h vÃ  168h Ä‘á»ƒ gá»£i Ã½ chu ká»³
ngÃ y/tuáº§n.
â€¢ Kiá»ƒm tra tÃ­nh dá»«ng: cháº¡y adf/kpss vÃ  viáº¿t nháº­n xÃ©t ngáº¯n gá»n vá» káº¿t luáº­n.
Äá»“ng thá»i, giáº£i thÃ­ch â€œthiáº¿u theo biáº¿n nÃ o lÃ  Ä‘Ã¡ng lo nháº¥t cho dá»± bÃ¡o pm2.5 vÃ  vÃ¬ sao?â€
Q2: Äá»‘i vá»›i baseline há»“i quy cho dá»± bÃ¡o, sinh viÃªn cáº§n giáº£i thÃ­ch Ä‘Æ°á»£c:
â€¢ VÃ¬ sao lag 24h thÆ°á»ng cÃ³ Ã½ nghÄ©a: do nhá»‹p sinh hoáº¡t theo ngÃ y vÃ  cÃ¡c Ä‘iá»u kiá»‡n khÃ­ tÆ°á»£ng láº·p láº¡i theo chu ká»³ ngÃ y.
â€¢ VÃ¬ sao pháº£i chia theo thá»i gian báº±ng cutoff: Ä‘á»ƒ mÃ´ hÃ¬nh khÃ´ng â€œnhÃ¬n tháº¥y tÆ°Æ¡ng laiâ€, trÃ¡nh Ä‘Ã¡nh giÃ¡ Ä‘áº¹p giáº£ do
leakage.
â€¢ PhÃ¢n biá»‡t rmse vÃ  mae: khi nÃ o rmse cao hÆ¡n nhiá»u? thÆ°á»ng xáº£y ra khi dá»¯ liá»‡u cÃ³ spike hoáº·c dá»± bÃ¡o sai máº¡nh á»Ÿ
má»™t sá»‘ thá»i Ä‘iá»ƒm, vÃ¬ rmse pháº¡t náº·ng sai sá»‘ lá»›n.
Q3: Äá»‘i vá»›i model dá»± bÃ¡o báº±ng ARIMA, sinh viÃªn cáº§n giáº£i thÃ­ch Ä‘Æ°á»£c: quy trÃ¬nh ra quyáº¿t Ä‘á»‹nh arima mÃ  sinh
viÃªn pháº£i viáº¿t trong bÃ¡o cÃ¡o
â€¢ Quan sÃ¡t chuá»—i gá»‘c Ä‘á»ƒ nháº­n diá»‡n xu hÆ°á»›ng vÃ  mÃ¹a vá»¥ (náº¿u cÃ³).
â€¢ Kiá»ƒm Ä‘á»‹nh dá»«ng báº±ng adf/kpss Ä‘á»ƒ chá»n ğ‘‘.
â€¢ Xem acf/pacf Ä‘á»ƒ Ä‘oÃ¡n cÃ¡c giÃ¡ trá»‹ á»©ng viÃªn cho ğ‘ vÃ  ğ‘.
â€¢ grid search vá»›i ğ‘, ğ‘ nhá» (giá»¯ ğ‘‘ cá»‘ Ä‘á»‹nh) vÃ  chá»n mÃ´ hÃ¬nh theo aic/bic.
â€¢ Cháº©n Ä‘oÃ¡n pháº§n dÆ°: kiá»ƒm tra residual cÃ³ gáº§n â€œwhite noiseâ€ hay khÃ´ng, nháº±m Ä‘Ã¡nh giÃ¡ mÃ´ hÃ¬nh Ä‘Ã£ báº¯t Ä‘Æ°á»£c cáº¥u
trÃºc chÃ­nh cá»§a chuá»—i chÆ°a.
5 HÆ°á»›ng dáº«n thá»±c hiá»‡n hoáº¡t Ä‘á»™ng FIT-DNU CONQUER
5.1 Má»¥c tiÃªu cá»§a hoáº¡t Ä‘á»™ng
Hoáº¡t Ä‘á»™ng FIT-DNU CONQUER Ä‘Æ°á»£c thiáº¿t káº¿ nháº±m giÃºp sinh viÃªn:
â€¢ Hiá»ƒu sÃ¢u báº£n cháº¥t cá»§a há»“i quy vÃ  chuá»—i thá»i gian thÃ´ng qua viá»‡c á»©ng dá»¥ng trÃªn dá»¯ liá»‡u thá»±c.
â€¢ Táº­p diá»…n giáº£i káº¿t quáº£ báº±ng ngÃ´n ngá»¯ Ä‘Æ¡n giáº£n (Feynman style), trÃ¡nh chá»‰ mÃ´ táº£ code hoáº·c trÃ­ch xuáº¥t sá»‘ liá»‡u.
â€¢ RÃ¨n luyá»‡n kháº£ nÄƒng trÃ¬nh bÃ y, giáº£i thÃ­ch vÃ  thuyáº¿t phá»¥c thÃ´ng qua hoáº¡t Ä‘á»™ng chia sáº» káº¿t quáº£.
â€¢ PhÃ¡t triá»ƒn tÆ° duy phÃ¢n tÃ­ch theo gÃ³c nhÃ¬n kinh doanh vÃ  Ä‘Æ°a ra Ä‘á» xuáº¥t hÃ nh Ä‘á»™ng.
Sinh viÃªn cáº§n xem xÃ©t dá»± Ã¡n nhÆ° má»™t nhiá»‡m vá»¥ Data Scientist thá»±c thá»¥: khÃ´ng chá»‰ â€œcháº¡y Ä‘Ãºng thuáº­t toÃ¡nâ€, mÃ 
pháº£i chuyá»ƒn dá»¯ liá»‡u thÃ nh tri thá»©c há»¯u Ã­ch.
5.2 YÃªu cáº§u
Äá»‘i vá»›i má»—i nhÃ³m (3-4 sinh viÃªn), thá»±c hiá»‡n thiáº¿t láº­p vÃ  cháº¡y pipeline (EDA â†’ Regression â†’ ARIMA, nhÆ° sau:
â€¢ CÃ i Ä‘áº·t mÃ´i trÆ°á»ng vÃ  cháº¡y pipeline Ä‘áº§y Ä‘á»§ báº±ng run_papermill.py (hoáº·c cháº¡y tuáº§n tá»± cÃ¡c notebook).
â€¢ Äáº£m báº£o táº¡o ra Ä‘áº§y Ä‘á»§ artifacts trong data/processed/ vÃ  notebook output trong notebooks/runs/.
â€¢ Ghi rÃµ cáº¥u hÃ¬nh tham sá»‘ Ä‘Ã£ dÃ¹ng: CUTOFF, LAG_HOURS, HORIZON, tráº¡m dÃ¹ng cho ARIMA (STATION).
Thá»±c hiá»‡n Ä‘áº§y Ä‘á»§ 3 cÃ¢u há»i trong pháº§n thá»±c hÃ nh.
1. Trá»±c quan hoÃ¡ vÃ  diá»…n giáº£i (báº¯t buá»™c):
â€¢ Tá»‘i thiá»ƒu 04 hÃ¬nh gá»“m: (1) PM2.5 toÃ n giai Ä‘oáº¡n, (2) PM2.5 zoom 1â€“2 thÃ¡ng, (3) ACF/PACF (hoáº·c 2 hÃ¬nh
tÃ¡ch), (4) Forecast vs Actual (ARIMA).
â€¢ Má»—i hÃ¬nh pháº£i cÃ³ 2â€“4 cÃ¢u diá»…n giáº£i: â€œNhÃ¬n hÃ¬nh nÃ y káº¿t luáº­n gÃ¬?â€ (khÃ´ng chá»‰ mÃ´ táº£ hÃ¬nh).
2. Insight vÃ  khuyáº¿n nghá»‹ (báº¯t buá»™c):
â€¢ Tá»‘i thiá»ƒu 05 insight cháº¥t lÆ°á»£ng dá»±a trÃªn EDA + káº¿t quáº£ dá»± bÃ¡o.
â€¢ Má»—i insight pháº£i tráº£ lá»i cÃ¢u há»i: â€œNáº¿u lÃ  ngÆ°á»i quáº£n lÃ½ mÃ´i trÆ°á»ng/Ä‘Ã´ thá»‹, tÃ´i cÃ³ thá»ƒ lÃ m gÃ¬?â€ hoáº·c â€œNáº¿u
triá»ƒn khai há»‡ thá»‘ng cáº£nh bÃ¡o sá»›m, tÃ´i cáº§n chÃº Ã½ Ä‘iá»u gÃ¬?â€
5.3 CÃ¡c chá»§ Ä‘á» gá»£i Ã½ phÃ¡t triá»ƒn tá»« bÃ i máº«u
Má»—i nhÃ³m sáº½ chá»n má»™t trong cÃ¡c chá»§ Ä‘á» dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ triá»ƒn khai vÃ  trÃ¬nh bÃ y.
5.3.1 Chá»§ Ä‘á» 1: Regression vs ARIMA â€“ khi nÃ o chá»n cÃ¡i nÃ o?
Trong chá»§ Ä‘á» nÃ y, má»—i nhÃ³m giá»¯ nguyÃªn pipeline hiá»‡n táº¡i vÃ  chá»‰ so sÃ¡nh hai hÆ°á»›ng dá»± bÃ¡o Ä‘Ã£ cÃ³: baseline há»“i quy
(dÃ¹ng time features vÃ  lag features) vÃ  ARIMA (mÃ´ hÃ¬nh chuá»—i thá»i gian Ä‘Æ¡n biáº¿n). YÃªu cáº§u quan trá»ng nháº¥t lÃ  so sÃ¡nh
pháº£i cÃ´ng báº±ng:
â€¢ CÃ¹ng má»™t tráº¡m (vÃ­ dá»¥ Aotizhongxin).
â€¢ CÃ¹ng má»‘c chia train/test theo thá»i gian báº±ng CUTOFF.
â€¢ CÃ¹ng horizon (Ä‘áº·c biá»‡t lÃ  horizon=1).
Sau khi cháº¡y xong hai mÃ´ hÃ¬nh, nhÃ³m pháº£i tráº£ lá»i ba cÃ¢u.
1. MÃ´ hÃ¬nh nÃ o tá»‘t hÆ¡n cho horizon=1?: á»Ÿ Ä‘Ã¢y sinh viÃªn cáº§n dá»±a vÃ o sá»‘ liá»‡u MAE/RMSE vÃ  giáº£i thÃ­ch Ä‘Æ°á»£c vÃ¬ sao
dá»± bÃ¡o ráº¥t ngáº¯n háº¡n thÆ°á»ng bá»‹ chi phá»‘i máº¡nh bá»Ÿi Ä‘á»™ trá»… gáº§n nhÆ° PM2.5_lag1, khiáº¿n regression baseline thÆ°á»ng
bÃ¡m sÃ¡t tá»‘t náº¿u feature engineering Ä‘Ãºng, trong khi ARIMA cÅ©ng cÃ³ thá»ƒ tá»‘t nhÆ°ng phá»¥ thuá»™c vÃ o cáº¥u trÃºc tá»±
tÆ°Æ¡ng quan vÃ  quyáº¿t Ä‘á»‹nh sai phÃ¢n.
Data mining LÃª Thá»‹ ThÃ¹y Trang
2. MÃ´ hÃ¬nh nÃ o á»•n hÆ¡n khi cÃ³ spike?: nhÃ³m pháº£i chá»n má»™t Ä‘oáº¡n thá»i gian cÃ³ Ä‘á»‰nh PM2.5 rÃµ (1â€“3 ngÃ y), váº½ forecast
vs actual cá»§a cáº£ hai mÃ´ hÃ¬nh trÃªn cÃ¹ng Ä‘oáº¡n Ä‘Ã³, rá»“i phÃ¢n tÃ­ch mÃ´ hÃ¬nh nÃ o pháº£n á»©ng nhanh hÆ¡n hoáº·c bá»‹ mÆ°á»£t hÃ³a
quÃ¡ má»©c; Ä‘á»“ng thá»i liÃªn há»‡ vá»›i sá»± khÃ¡c nhau giá»¯a RMSE vÃ  MAE, vÃ¬ RMSE sáº½ tÄƒng máº¡nh náº¿u mÃ´ hÃ¬nh sai náº·ng
á»Ÿ má»™t vÃ i thá»i Ä‘iá»ƒm spike.
3. Náº¿u triá»ƒn khai tháº­t, báº¡n chá»n gÃ¬ vÃ  vÃ¬ sao?: cÃ¢u nÃ y khÃ´ng chá»‰ dá»±a trÃªn Ä‘iá»ƒm sá»‘ mÃ  cÃ²n dá»±a trÃªn bá»‘i cáº£nh váº­n
hÃ nh: regression baseline thÆ°á»ng dá»… má»Ÿ rá»™ng khi muá»‘n thÃªm Ä‘áº·c trÆ°ng, dá»… cáº­p nháº­t vÃ  cháº¡y nhanh, cÃ²n ARIMA
cÃ³ Æ°u tháº¿ vá» giáº£i thÃ­ch theo (ğ‘, ğ‘‘, ğ‘) vÃ  cÃ³ thá»ƒ kÃ¨m khoáº£ng tin cáº­y; náº¿u má»¥c tiÃªu lÃ  cáº£nh bÃ¡o sá»›m trong Ä‘iá»u kiá»‡n
thá»i tiáº¿t biáº¿n Ä‘á»™ng máº¡nh.
5.3.2 Chá»§ Ä‘á» 2: SARIMA â€“ thÃªm mÃ¹a vá»¥ (seasonality)
Chá»§ Ä‘á» SARIMA yÃªu cáº§u nhÃ³m nÃ¢ng cáº¥p trá»±c tiáº¿p tá»« ARIMA lÃªn SARIMA (ğ‘, ğ‘‘, ğ‘)(ğ‘ƒ , ğ·, ğ‘„, ğ‘ ) Ä‘á»ƒ mÃ´ hÃ¬nh hÃ³a
mÃ¹a vá»¥ theo ngÃ y hoáº·c theo tuáº§n.
NhÃ³m pháº£i chá»©ng minh ráº±ng chuá»—i PM2.5 cÃ³ mÃ¹a vá»¥ báº±ng cÃ¡ch dÃ¹ng ACF: náº¿u tháº¥y cÃ¡c Ä‘á»‰nh láº·p láº¡i máº¡nh á»Ÿ lag
24, 48, â€¦ thÃ¬ Ä‘Ã³ lÃ  tÃ­n hiá»‡u mÃ¹a vá»¥ theo ngÃ y, cÃ²n náº¿u xuáº¥t hiá»‡n tÃ­n hiá»‡u á»Ÿ lag 168, 336, â€¦ thÃ¬ gá»£i Ã½ mÃ¹a vá»¥ theo tuáº§n.
Sau bÆ°á»›c chá»©ng minh, nhÃ³m thá»­ Ã­t nháº¥t má»™t cáº¥u hÃ¬nh SARIMA vá»›i s=24 (báº¯t buá»™c), vÃ  cÃ³ thá»ƒ thá»­ thÃªm s=168
nhÆ° má»™t phiÃªn báº£n nÃ¢ng cáº¥p.
Äiá»ƒm quan trá»ng lÃ  nhÃ³m khÃ´ng Ä‘Æ°á»£c grid search bá»«a, mÃ  pháº£i cÃ³ chiáº¿n lÆ°á»£c: giá»¯ ğ‘‘ theo káº¿t luáº­n stationarity cá»§a
ARIMA baseline, sau Ä‘Ã³ chá»n má»™t vÃ¹ng tÃ¬m kiáº¿m nhá» cho ğ‘, ğ‘ vÃ  thÃªm ğ‘ƒ , ğ‘„ á»Ÿ má»©c tháº¥p (0â€“2), cÃ¢n nháº¯c ğ· (0 hoáº·c 1)
náº¿u mÃ¹a vá»¥ thá»ƒ hiá»‡n rÃµ vÃ  chuá»—i cÃ³ dáº¥u hiá»‡u khÃ´ng dá»«ng theo chu ká»³.
Káº¿t quáº£ báº¯t buá»™c pháº£i Ä‘Æ°á»£c trÃ¬nh bÃ y dÆ°á»›i dáº¡ng so sÃ¡nh giá»¯a ARIMA vÃ  SARIMA báº±ng cáº£ AIC/BIC láº«n
RMSE/MAE trÃªn táº­p test, sau Ä‘Ã³ viáº¿t káº¿t luáº­n ngáº¯n gá»n: SARIMA cáº£i thiá»‡n/khÃ´ng cáº£i thiá»‡n vÃ¬ sao, vÃ  mÃ¹a vá»¥ 24h hay
168h phÃ¹ há»£p hÆ¡n vá»›i tráº¡m Ä‘Ã³.
5.3.3 Chá»§ Ä‘á» 3: SARIMAX â€“ ARIMA + biáº¿n ngoáº¡i sinh (weather as X)
Chá»§ Ä‘á» SARIMAX giÃºp sinh viÃªn vÆ°á»£t qua giá»›i háº¡n lá»›n nháº¥t cá»§a ARIMA Ä‘Æ¡n biáº¿n: ARIMA chá»‰ nhÃ¬n vÃ o quÃ¡ khá»©
cá»§a PM2.5, trong khi PM2.5 chá»‹u tÃ¡c Ä‘á»™ng máº¡nh bá»Ÿi cÃ¡c yáº¿u tá»‘ khÃ­ tÆ°á»£ng.
VÃ¬ váº­y, nhÃ³m sáº½ xÃ¢y dá»±ng mÃ´ hÃ¬nh SARIMAX báº±ng cÃ¡ch Ä‘Æ°a má»™t táº­p biáº¿n ngoáº¡i sinh nhÆ° TEMP, WSPM, RAIN,
PRES, DEWP lÃ m exog, tá»‘i thiá»ƒu chá»n 3 biáº¿n vÃ  pháº£i giáº£i thÃ­ch lÃ½ do lá»±a chá»n.
TrÆ°á»›c khi fit mÃ´ hÃ¬nh, nhÃ³m cáº§n lÃ m má»™t minh hoáº¡ nhá» Ä‘á»ƒ chá»©ng minh thá»i tiáº¿t cÃ³ liÃªn quan: cÃ³ thá»ƒ lÃ  tÆ°Æ¡ng quan
giá»¯a PM2.5 vá»›i WSPM/RAIN (cÃ³ hoáº·c khÃ´ng Ä‘á»™ trá»…), hoáº·c má»™t biá»ƒu Ä‘á»“ scatter Ä‘Æ¡n giáº£n cho tháº¥y khi giÃ³ máº¡nh hoáº·c mÆ°a
tÄƒng thÃ¬ PM2.5cÃ³ xu hÆ°á»›ng giáº£m.
YÃªu cáº§u quan trá»ng nháº¥t cá»§a chá»§ Ä‘á» nÃ y lÃ  chá»‘ng leakage: nhÃ³m pháº£i mÃ´ táº£ rÃµ rÃ ng cÃ¡ch ghÃ©p dá»¯ liá»‡u sao cho chá»‰
dÃ¹ng ğ‘‹(ğ‘¡) Ä‘á»ƒ dá»± bÃ¡o ğ‘¦(ğ‘¡ + 1); tuyá»‡t Ä‘á»‘i khÃ´ng dÃ¹ng ğ‘‹ tÆ°Æ¡ng lai trong lÃºc dá»± bÃ¡o, vÃ¬ trong triá»ƒn khai tháº­t ta khÃ´ng biáº¿t
thá»i tiáº¿t tÆ°Æ¡ng lai (trá»« khi cÃ³ nguá»“n dá»± bÃ¡o thá»i tiáº¿t riÃªng, nhÆ°ng lab nÃ y chÆ°a dÃ¹ng).
Sau khi cháº¡y, nhÃ³m pháº£i so sÃ¡nh SARIMAX vá»›i baseline ARIMA/SARIMA báº±ng RMSE/MAE vÃ  bá»• sung má»™t
pháº§n Ä‘Ã¡nh giÃ¡ cháº¥t lÆ°á»£ng mÃ´ hÃ¬nh báº±ng cháº©n Ä‘oÃ¡n pháº§n dÆ°: tá»‘i thiá»ƒu xem residual cÃ²n tá»± tÆ°Æ¡ng quan khÃ´ng (vÃ­ dá»¥ ACF
cá»§a residual) hoáº·c diá»…n giáº£i trá»±c quan residual trÆ°á»›c/sau.
Káº¿t quáº£ báº¯t buá»™c: tráº£ lá»i rÃµ SARIMAX cáº£i thiá»‡n máº¡nh trong giai Ä‘oáº¡n nÃ o (thÆ°á»ng lÃ  lÃºc thá»i tiáº¿t biáº¿n Ä‘á»™ng, Ä‘áº·c
biá»‡t giÃ³/mÆ°a), cáº£i thiá»‡n Ã­t trong giai Ä‘oáº¡n nÃ o (khi chuá»—i bá»‹ chi phá»‘i bá»Ÿi chu ká»³ ná»™i táº¡i), vÃ  náº¿u triá»ƒn khai há»‡ thá»‘ng cáº£nh
bÃ¡o sá»›m, SARIMAX sáº½ Ä‘Æ°á»£c váº­n hÃ nh ra sao Ä‘á»ƒ cáº­p nháº­t mÃ´ hÃ¬nh vÃ  theo dÃµi sai sá»‘ theo thá»i gian